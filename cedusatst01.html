<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>어휘끝 고교기본 문장제 시험</title>
    <style>
        :root { --main-purple: #5c5cf4; --bg-gray: #f0f2f5; --error-red: #ff4d4d; --success-green: #2ecc71; }
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background-color: var(--bg-gray); margin: 0; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; width: 100%; max-width: 500px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); padding: 30px; box-sizing: border-box; text-align: center; }
        
        .btn { width: 100%; border: none; border-radius: 12px; padding: 16px; font-size: 16px; font-weight: 700; cursor: pointer; color: white; margin-bottom: 12px; transition: 0.2s; }
        .btn-purple { background-color: var(--main-purple); }
        .btn-gray { background-color: #636e72; }

        .screen { display: none; } .active { display: block; }
        
        input[type="text"] { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 17px; box-sizing: border-box; outline: none; }

        .header { display: flex; justify-content: space-between; font-weight: 800; margin-bottom: 25px; font-size: 18px; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }
        .card { background: #f8f9fa; border-radius: 18px; padding: 30px; margin-bottom: 25px; line-height: 1.6; text-align: left; }
        .en { font-size: 20px; margin-bottom: 12px; color: #2d3436; font-weight: 500; }
        .ko-hint { font-size: 16px; color: var(--main-purple); font-weight: 600; }
        .blank { color: var(--main-purple); font-weight: 800; text-decoration: underline; }

        .wrong-list { max-height: 350px; overflow-y: auto; text-align: left; border: 1px solid #eee; padding: 15px; border-radius: 12px; margin-bottom: 25px; background: #fff; }
        .wrong-item { border-bottom: 1px solid #f0f0f0; padding: 15px 0; font-size: 14px; }
        .correct-ans { color: #0984e3; font-weight: 700; }
        .wrong-ans { color: var(--error-red); font-weight: 700; }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-screen" class="screen">
        <div class="header">
            <span id="unit-name">Quiz</span>
            <span id="progress">0 / 0</span>
        </div>
        <div class="card">
            <div class="en" id="en-text"></div>
            <div class="ko-hint" id="ko-text"></div>
        </div>
        <input type="text" id="user-input" placeholder="정답을 입력하세요..." autocomplete="off">
        <button class="btn btn-purple" style="margin-top:10px;" onclick="handleNext()">제출</button>
    </div>

    <div id="result-screen" class="screen">
        <h2 style="font-size:24px; font-weight:800; margin-top:0;">퀴즈 결과</h2>
        <div id="res-student" style="font-weight:700; font-size:18px; margin-bottom:10px;"></div>
        <div id="final-score" style="color:var(--main-purple); font-weight:800; font-size:20px; margin-bottom:25px;"></div>
        <div style="text-align:left; font-weight:800; margin-bottom:10px;">틀린 문제 내역</div>
        <div class="wrong-list" id="wrong-list"></div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button class="btn btn-purple" onclick="downloadResult()">결과 저장</button>
            <button class="btn btn-gray" onclick="location.href='AAAAA!.html'">돌아가기</button>
        </div>
    </div>
</div>

<script>
    /* 데이터부: AI Studio 생성 데이터 삽입 */
    const quizData = { "유닛1": [
    { "sentence": "She cares a lot about her physical appearance.", "ko": "그녀는 자신의 신체적 외모에 신경을 많이 쓴다.", "word": "appearance" },
    { "sentence": "The sudden appearance of the sun brightened the day.", "ko": "태양의 갑작스러운 등장은 하루를 밝게 만들었다.", "word": "appearance" },
    { "sentence": "The moon began to emerge from behind the clouds.", "ko": "달이 구름 뒤에서 나오기 시작했다.", "word": "emerge" },
    { "sentence": "Fresh water is essential for all living things.", "ko": "신선한 물은 모든 생명체에게 필수적이다.", "word": "essential" },
    { "sentence": "Pollution is a major problem in big cities.", "ko": "오염은 대도시에서 주요한 문제이다.", "word": "major" },
    { "sentence": "I decided to major in computer science.", "ko": "나는 컴퓨터 공학을 전공하기로 결심했다.", "word": "major" },
    { "sentence": "What is your university major?", "ko": "당신의 대학교 전공은 무엇입니까?", "word": "major" },
    { "sentence": "He was promoted to the rank of major.", "ko": "그는 소령 계급으로 진급했다.", "word": "major" },
    { "sentence": "We must preserve the environment for the sake of future generations.", "ko": "우리는 미래 세대의 이익을 위해 환경을 보존해야 한다.", "word": "sake" },
    { "sentence": "He moved to the countryside for the sake of his health.", "ko": "그는 건강을 목적으로 시골로 이사했다.", "word": "sake" },
    { "sentence": "The company needs radical changes to survive.", "ko": "그 회사는 생존을 위해 급진적인 변화가 필요하다.", "word": "radical" },
    { "sentence": "There is a radical difference between the two theories.", "ko": "두 이론 사이에는 근본적인 차이가 있다.", "word": "radical" },
    { "sentence": "This phone has many unique features.", "ko": "이 전화기는 많은 독특한 특징들을 가지고 있다.", "word": "features" },
    { "sentence": "Her delicate features made her look very young.", "ko": "그녀의 섬세한 이목구비는 그녀를 매우 젊어 보이게 만들었다.", "word": "features" },
    { "sentence": "The magazine ran a special feature on climate change.", "ko": "그 잡지는 기후 변화에 대한 특별 특집을 실었다.", "word": "feature" },
    { "sentence": "The exhibition features works by local artists.", "ko": "그 전시회는 지역 예술가들의 작품을 특징으로 한다.", "word": "features" },
    { "sentence": "The teacher granted me permission to leave early.", "ko": "선생님은 나에게 조퇴를 허락해 주셨다.", "word": "granted" },
    { "sentence": "The committee will grant the approval tomorrow.", "ko": "위원회는 내일 승인을 내릴 것이다.", "word": "grant" },
    { "sentence": "They received a grant to study the rare plants.", "ko": "그들은 희귀 식물을 연구하기 위한 보조금을 받았다.", "word": "grant" },
    { "sentence": "Please don't use that angry tone with me.", "ko": "나에게 그런 화난 말투를 사용하지 마세요.", "word": "tone" },
    { "sentence": "The violin has a warm and rich tone.", "ko": "그 바이올린은 따뜻하고 풍부한 음색을 가지고 있다.", "word": "tone" },
    { "sentence": "The room was painted in soft tones of blue.", "ko": "그 방은 부드러운 파란색 색조로 칠해졌다.", "word": "tones" },
    { "sentence": "Taking a walk can help relieve stress.", "ko": "산책을 하는 것은 스트레스를 완화시키는 데 도움이 될 수 있다.", "word": "relieve" },
    { "sentence": "Snow in the desert is a rare phenomenon.", "ko": "사막에서의 눈은 희귀한 현상이다.", "word": "phenomenon" },
    { "sentence": "Oranges contain a lot of vitamin C.", "ko": "오렌지는 많은 비타민 C를 함유하고 있다.", "word": "contain" },
    { "sentence": "He struggled to contain his laughter during the meeting.", "ko": "그는 회의 중에 웃음을 억제하려고 애썼다.", "word": "contain" },
    { "sentence": "Plants absorb water through their roots.", "ko": "식물은 뿌리를 통해 물을 흡수한다.", "word": "absorb" },
    { "sentence": "The interesting book completely absorbed him.", "ko": "그 흥미로운 책은 그를 완전히 열중하게 만들었다.", "word": "absorbed" },
    { "sentence": "I have a prior engagement this evening.", "ko": "나는 오늘 저녁에 사전 약속(선약)이 있다.", "word": "prior" },
    { "sentence": "They live in great comfort in their new home.", "ko": "그들은 새 집에서 매우 안락하게 산다.", "word": "comfort" },
    { "sentence": "The kind words of my friends were a great comfort.", "ko": "친구들의 친절한 말은 큰 위안이 되었다.", "word": "comfort" },
    { "sentence": "Please ensure that all the windows are closed.", "ko": "모든 창문이 닫혔는지 반드시 확인해 주세요.", "word": "ensure" },
    { "sentence": "Many English words derive from Latin.", "ko": "많은 영어 단어들이 라틴어에서 유래한다.", "word": "derive" },
    { "sentence": "The wind turbines generate electricity for the city.", "ko": "풍력 터빈은 도시를 위한 전기를 발생시킨다.", "word": "generate" },
    { "sentence": "The new movie generated a lot of excitement.", "ko": "그 새 영화는 많은 흥분을 일으켰다.", "word": "generated" },
    { "sentence": "The world's population is increasing rapidly.", "ko": "세계 인구는 빠르게 증가하고 있다.", "word": "population" },
    { "sentence": "The chef demonstrated how to cook the dish.", "ko": "요리사는 그 요리를 어떻게 만드는지 보여주었다.", "word": "demonstrated" },
    { "sentence": "Thousands gathered to demonstrate against the law.", "ko": "수천 명의 사람들이 법에 반대하여 시위하기 위해 모였다.", "word": "demonstrate" },
    { "sentence": "This discovery could benefit all of humanity.", "ko": "이 발견은 전 인류에게 이익이 될 수 있다.", "word": "humanity" },
    { "sentence": "He treats his patients with great humanity.", "ko": "그는 환자들을 큰 인간성(인류애)을 가지고 대한다.", "word": "humanity" },
    { "sentence": "Switzerland remained neutral during the war.", "ko": "스위스는 전쟁 중에 중립을 유지했다.", "word": "neutral" },
    { "sentence": "Their ultimate goal is to win the championship.", "ko": "그들의 궁극적인 목표는 챔피언십에서 우승하는 것이다.", "word": "ultimate" },
    { "sentence": "This resort is the ultimate place for relaxation.", "ko": "이 리조트는 휴식을 위한 최고의 장소이다.", "word": "ultimate" },
    { "sentence": "The training session will last for three hours.", "ko": "훈련 시간은 3시간 동안 지속될 것이다.", "word": "session" },
    { "sentence": "He stripped off his wet clothes after the rain.", "ko": "그는 비가 온 뒤 젖은 옷을 벗었다.", "word": "stripped" },
    { "sentence": "The athlete was stripped of his gold medal.", "ko": "그 선수는 금메달을 박탈당했다(빼앗겼다).", "word": "stripped" },
    { "sentence": "Write your name on a strip of paper.", "ko": "종이 조각에 당신의 이름을 쓰세요.", "word": "strip" },
    { "sentence": "The magician created an illusion of a floating lady.", "ko": "마술사는 떠 있는 여성의 환상을 만들어냈다.", "word": "illusion" },
    { "sentence": "The smell of fresh bread tempted him to enter.", "ko": "신선한 빵 냄새가 그를 들어가도록 유혹했다.", "word": "tempted" },
    { "sentence": "You may need to modify your plans slightly.", "ko": "당신은 계획을 약간 수정해야 할 수도 있다.", "word": "modify" },
    { "sentence": "Adjectives are used to modify nouns.", "ko": "형용사는 명사를 수식하는 데 사용된다.", "word": "modify" },
    { "sentence": "I still owe the bank ten thousand dollars.", "ko": "나는 여전히 은행에 만 달러를 빚지고 있다.", "word": "owe" },
    { "sentence": "I owe you a lot for all your help.", "ko": "당신의 모든 도움에 대해 큰 신세를 지고 있습니다.", "word": "owe" },
    { "sentence": "She owes her success to hard work.", "ko": "그녀는 자신의 성공을 열심히 일한 덕분으로 돌린다.", "word": "owes" },
    { "sentence": "Do not expose your skin to direct sunlight.", "ko": "피부를 직사광선에 노출시키지 마세요.", "word": "expose" },
    { "sentence": "The newspaper exposed the politician's secret.", "ko": "그 신문은 정치인의 비밀을 폭로했다.", "word": "exposed" },
    { "sentence": "A narrow passage leads to the back garden.", "ko": "좁은 통로가 뒤뜰로 이어진다.", "word": "passage" },
    { "sentence": "Please read this passage from the book.", "ko": "책에서 이 구절을 읽어 주세요.", "word": "passage" },
    { "sentence": "He felt sad as he watched the passage of time.", "ko": "그는 시간의 흐름을 지켜보며 슬픔을 느꼈다.", "word": "passage" },
    { "sentence": "You need to register for the classes by Friday.", "ko": "금요일까지 수업을 등록해야 한다.", "word": "register" },
    { "sentence": "The ice began to break up as it got warmer.", "ko": "날씨가 따뜻해지자 얼음이 부서지기 시작했다.", "word": "break up" },
    { "sentence": "Their relationship broke up after three years.", "ko": "그들의 관계는 3년 만에 끝났다.", "word": "broke up" },
    { "sentence": "I need to brush up on my English skills.", "ko": "나는 영어 실력을 다시 공부(복습)할 필요가 있다.", "word": "brush up" },
    { "sentence": "Regular exercise helps to build up your strength.", "ko": "규칙적인 운동은 체력을 기르는 데 도움이 된다.", "word": "build up" },
    { "sentence": "The old documents were burned up in the fire.", "ko": "오래된 문서들은 불에 완전히 타버렸다.", "word": "burned up" },
    { "sentence": "The child is burning up with a high fever.", "ko": "그 아이는 고열로 몹시 열이 나고 있다.", "word": "burning up" },
    { "sentence": "The old song called up many memories.", "ko": "그 오래된 노래는 많은 기억을 불러일으켰다.", "word": "called up" },
    { "sentence": "Many young men were called up for military service.", "ko": "많은 젊은이들이 군 복무를 위해 소집되었다.", "word": "called up" },
    { "sentence": "We need to come up with a better solution.", "ko": "우리는 더 나은 해결책을 생각해내야 한다.", "word": "come up with" },
    { "sentence": "The lake dried up during the long drought.", "ko": "호수가 긴 가뭄 동안 바싹 말라붙었다.", "word": "dried up" },
    { "sentence": "The funding for the project has dried up.", "ko": "그 프로젝트를 위한 자금이 고갈되었다.", "word": "dried up" },
    { "sentence": "The pillars hold up the roof of the building.", "ko": "기둥들이 건물의 지붕을 떠받치고 있다.", "word": "hold up" },
    { "sentence": "He is holding up well despite the bad news.", "ko": "그는 나쁜 소식에도 불구하고 잘 유지하고(견디고) 있다.", "word": "holding up" }
] };

    let currentSet = []; let idx = 0; let results = []; let studentName = "";

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    window.onload = function() {
        studentName = window.prompt("학생 이름을 입력하세요.", "");
        if (!studentName || !studentName.trim()) {
            document.querySelector('.container').innerHTML = '<h1>시험이 취소되었습니다. 새로고침 후 다시 시도하세요.</h1>';
            return;
        }
        studentName = studentName.trim();
        
        const unitKey = Object.keys(quizData)[0];
        if (!unitKey || !quizData[unitKey] || quizData[unitKey].length === 0) {
            document.querySelector('.container').innerHTML = '<h1>퀴즈 데이터를 불러올 수 없습니다.</h1>';
            return;
        }

        let allQuestions = quizData[unitKey];
        currentSet = shuffle([...allQuestions]).slice(0, 40);
        
        if (currentSet.length === 0) {
            document.querySelector('.container').innerHTML = '<h1>문제가 없습니다.</h1>';
            return;
        }
        
        idx = 0;
        results = [];
        document.getElementById('quiz-screen').classList.add('active');
        document.getElementById('unit-name').textContent = unitKey;
        showQ();
    };

    function showQ() {
        if (idx >= currentSet.length) {
            showResult();
            return;
        }
        const q = currentSet[idx];
        const blank = q.word[0] + "_".repeat(q.word.length - 1);
        const regex = new RegExp("\\b" + q.word + "\\b", "gi");
        document.getElementById('en-text').innerHTML = q.sentence.replace(regex, `<span class="blank">${blank}</span>`);
        document.getElementById('ko-text').textContent = q.ko;
        document.getElementById('progress').textContent = (idx + 1) + " / " + currentSet.length;
        document.getElementById('user-input').value = "";
        document.getElementById('user-input').focus();
    }

    function handleNext() {
        const userAns = document.getElementById('user-input').value.trim().toLowerCase();
        if (!userAns) return; 
        const correctAns = currentSet[idx].word.toLowerCase();
        results.push({ q: currentSet[idx], user: userAns, isCorrect: userAns === correctAns });
        idx++;
        if (idx < currentSet.length) {
            showQ();
        } else {
            showResult();
        }
    }
    
    document.getElementById('user-input').addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            handleNext();
        }
    });

    function showResult() {
        document.getElementById('quiz-screen').classList.remove('active');
        document.getElementById('result-screen').classList.add('active');
        const correctCount = results.filter(r => r.isCorrect).length;
        document.getElementById('res-student').textContent = studentName + " 학생";
        document.getElementById('final-score').textContent = `총 ${results.length}문제 중 ${correctCount}문제 정답`;
        
        const listHtml = results.filter(r => !r.isCorrect).map(r => `
            <div class="wrong-item">
                <div style="margin-bottom:5px;">${r.q.sentence.replace(new RegExp(r.q.word, 'gi'), `<b style="color:red">${r.q.word}</b>`)}</div>
                <div style="font-size:12px; color:blue;">정답: <b class="correct-ans">${r.q.word}</b> | 입력: <b class="wrong-ans">${r.user || '미입력'}</b></div>
            </div>
        `).join('');
        document.getElementById('wrong-list').innerHTML = listHtml || "<div style='padding:20px; color:var(--success-green); font-weight:bold;'>만점입니다!</div>";
    }

    function downloadResult() {
        const correctCount = results.filter(r => r.isCorrect).length;
        const unitName = document.getElementById('unit-name').textContent;
        let content = `학생명 : ${studentName}\n유닛명 : ${unitName}\n점  수 : ${results.length} 중 ${correctCount}\n\n[오답 기록]\n`;
        results.filter(r => !r.isCorrect).forEach((r, i) => {
            content += `${i+1}. 정답: ${r.q.word}, 내 입력: ${r.user}\n   문장: ${r.q.sentence}\n\n`;
        });
        const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
        a.download = `결과_${studentName}_${unitName}.txt`;
        a.click();
    }
</script>
</body>
</html>
