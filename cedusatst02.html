<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>어휘끝 고교기본 문장제 시험</title>
    <style>
        :root { --main-purple: #5c5cf4; --bg-gray: #f0f2f5; --error-red: #ff4d4d; --success-green: #2ecc71; }
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background-color: var(--bg-gray); margin: 0; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; width: 100%; max-width: 500px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); padding: 30px; box-sizing: border-box; text-align: center; }
        
        .btn { width: 100%; border: none; border-radius: 12px; padding: 16px; font-size: 16px; font-weight: 700; cursor: pointer; color: white; margin-bottom: 12px; transition: 0.2s; }
        .btn-purple { background-color: var(--main-purple); }
        .btn-gray { background-color: #636e72; }

        .screen { display: none; } .active { display: block; }
        
        input[type="text"] { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 17px; box-sizing: border-box; outline: none; }

        .header { display: flex; justify-content: space-between; font-weight: 800; margin-bottom: 25px; font-size: 18px; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }
        .card { background: #f8f9fa; border-radius: 18px; padding: 30px; margin-bottom: 25px; line-height: 1.6; text-align: left; }
        .en { font-size: 20px; margin-bottom: 12px; color: #2d3436; font-weight: 500; }
        .ko-hint { font-size: 16px; color: var(--main-purple); font-weight: 600; }
        .blank { color: var(--main-purple); font-weight: 800; text-decoration: underline; }

        .wrong-list { max-height: 350px; overflow-y: auto; text-align: left; border: 1px solid #eee; padding: 15px; border-radius: 12px; margin-bottom: 25px; background: #fff; }
        .wrong-item { border-bottom: 1px solid #f0f0f0; padding: 15px 0; font-size: 14px; }
        .correct-ans { color: #0984e3; font-weight: 700; }
        .wrong-ans { color: var(--error-red); font-weight: 700; }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-screen" class="screen">
        <div class="header">
            <span id="unit-name">Quiz</span>
            <span id="progress">0 / 0</span>
        </div>
        <div class="card">
            <div class="en" id="en-text"></div>
            <div class="ko-hint" id="ko-text"></div>
        </div>
        <input type="text" id="user-input" placeholder="정답을 입력하세요..." autocomplete="off">
        <button class="btn btn-purple" style="margin-top:10px;" onclick="handleNext()">제출</button>
    </div>

    <div id="result-screen" class="screen">
        <h2 style="font-size:24px; font-weight:800; margin-top:0;">퀴즈 결과</h2>
        <div id="res-student" style="font-weight:700; font-size:18px; margin-bottom:10px;"></div>
        <div id="final-score" style="color:var(--main-purple); font-weight:800; font-size:20px; margin-bottom:25px;"></div>
        <div style="text-align:left; font-weight:800; margin-bottom:10px;">틀린 문제 내역</div>
        <div class="wrong-list" id="wrong-list"></div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button class="btn btn-purple" onclick="downloadResult()">결과 저장</button>
            <button class="btn btn-gray" onclick="location.href='AAAAA!.html'">돌아가기</button>
        </div>
    </div>
</div>

<script>
    /* 데이터부: AI Studio 생성 데이터 삽입 */
    const quizData = { "Unit 02": [
    { "sentence": "She finally attained her goal of becoming a doctor.", "ko": "그녀는 마침내 의사가 되겠다는 목표를 성취했다.", "word": "attained" },
    { "sentence": "Some trees can attain a height of 60 meters.", "ko": "일부 나무들은 60미터 높이에 이를 수 있다.", "word": "attain" },
    { "sentence": "Someone abandoned the poor puppy in the park.", "ko": "누군가가 그 불쌍한 강아지를 공원에 유기했다.", "word": "abandoned" },
    { "sentence": "They had to abandon the search due to the storm.", "ko": "그들은 폭풍 때문에 수색을 그만두어야 했다.", "word": "abandon" },
    { "sentence": "Modern technology facilitates communication across the globe.", "ko": "현대 기술은 전 세계의 의사소통을 용이하게 한다.", "word": "facilitates" },
    { "sentence": "There are inherent risks in any business venture.", "ko": "어떤 사업적 모험에도 내재하는 위험이 있다.", "word": "inherent" },
    { "sentence": "The cost of the project exceeded our initial budget.", "ko": "프로젝트 비용이 우리의 초기 예산을 초과했다.", "word": "exceeded" },
    { "sentence": "We struggled to walk through the dense forest.", "ko": "우리는 빽빽한 숲을 통과해 걷느라 애를 먹었다.", "word": "dense" },
    { "sentence": "Drivers were warned of dense fog on the highway.", "ko": "운전자들은 고속도로의 짙은 안개에 대해 경고받았다.", "word": "dense" },
    { "sentence": "The city has a very dense population.", "ko": "그 도시는 인구가 매우 밀집되어 있다.", "word": "dense" },
    { "sentence": "The problem was seemingly impossible to solve.", "ko": "그 문제는 외견상으로 해결하기 불가능해 보였다.", "word": "seemingly" },
    { "sentence": "Don't let your personal problems interfere with your work.", "ko": "개인적인 문제가 당신의 일을 방해하게 두지 마라.", "word": "interfere" },
    { "sentence": "He has no right to interfere in my private life.", "ko": "그는 나의 사생활에 간섭할 권리가 없다.", "word": "interfere" },
    { "sentence": "You can substitute honey for sugar in this recipe.", "ko": "이 레시피에서 설탕 대신 꿀을 대체할 수 있다.", "word": "substitute" },
    { "sentence": "Plastic is often used as a substitute for wood.", "ko": "플라스틱은 종종 나무의 대용품으로 사용된다.", "word": "substitute" },
    { "sentence": "We need to eliminate all possible errors from the report.", "ko": "우리는 보고서에서 모든 가능한 오류를 제거해야 한다.", "word": "eliminate" },
    { "sentence": "Tonight's match is France versus England.", "ko": "오늘 밤 경기는 프랑스 대 영국이다.", "word": "versus" },
    { "sentence": "The teacher assigned a difficult task to the students.", "ko": "선생님은 학생들에게 어려운 과업을 배정했다.", "word": "assigned" },
    { "sentence": "He was assigned to the local branch office.", "ko": "그는 지역 지사로 배치되었다.", "word": "assigned" },
    { "sentence": "The principal assembled all the students in the hall.", "ko": "교장 선생님은 전교생을 강당에 집합시켰다.", "word": "assembled" },
    { "sentence": "It took me two hours to assemble the new desk.", "ko": "새 책상을 조립하는 데 두 시간이 걸렸다.", "word": "assemble" },
    { "sentence": "The stars glowed brightly in the night sky.", "ko": "별들이 밤하늘에서 밝게 빛났다.", "word": "glowed" },
    { "sentence": "Her cheeks glowed with embarrassment.", "ko": "그녀의 뺨이 당황해서 상기되었다.", "word": "glowed" },
    { "sentence": "We could see the orange glow of the fire from a distance.", "ko": "우리는 멀리서 불의 주황색 불빛을 볼 수 있었다.", "word": "glow" },
    { "sentence": "There was a healthy glow in his face after exercise.", "ko": "운동 후에 그의 얼굴에는 건강한 홍조가 있었다.", "word": "glow" },
    { "sentence": "The loud noise triggered a panic among the crowd.", "ko": "큰 소음이 군중들 사이에 공포를 촉발시켰다.", "word": "triggered" },
    { "sentence": "The loss of his job was the trigger for his depression.", "ko": "직장을 잃은 것이 그의 우울증의 계기가 되었다.", "word": "trigger" },
    { "sentence": "He pulled the trigger of the gun.", "ko": "그는 총의 방아쇠를 당겼다.", "word": "trigger" },
    { "sentence": "I spent the afternoon browsing in the bookstore.", "ko": "나는 오후를 서점에서 둘러보며 보냈다.", "word": "browsing" },
    { "sentence": "Plants absorb moisture from the soil.", "ko": "식물은 토양으로부터 수분을 흡수한다.", "word": "moisture" },
    { "sentence": "The prices have remained static for several months.", "ko": "가격이 몇 달 동안 고정된 상태를 유지해왔다.", "word": "static" },
    { "sentence": "The country's economy is in a static state.", "ko": "그 나라의 경제는 정지 상태에 있다.", "word": "static" },
    { "sentence": "There was too much static on the radio to hear the news.", "ko": "라디오에 잡음이 너무 많아서 뉴스를 들을 수 없었다.", "word": "static" },
    { "sentence": "Greed is often considered a major vice.", "ko": "탐욕은 종종 주요한 악으로 여겨진다.", "word": "vice" },
    { "sentence": "He was elected as the vice president of the company.", "ko": "그는 회사의 부사장으로 선출되었다.", "word": "vice" },
    { "sentence": "He had to exert all his strength to move the rock.", "ko": "그는 바위를 옮기기 위해 그의 모든 힘을 써야 했다.", "word": "exert" },
    { "sentence": "The color of the curtains faded in the sun.", "ko": "커튼의 색깔이 햇빛에 바랬다.", "word": "faded" },
    { "sentence": "The sound of the music slowly faded away.", "ko": "음악 소리가 서서히 사라졌다.", "word": "faded" },
    { "sentence": "Water is leaking from the pipe in the kitchen.", "ko": "부엌의 파이프에서 물이 새고 있다.", "word": "leaking" },
    { "sentence": "Someone leaked the confidential information to the press.", "ko": "누군가가 기밀 정보를 언론에 누설했다.", "word": "leaked" },
    { "sentence": "There is a leak in the roof.", "ko": "지붕에 새는 곳이 있다.", "word": "leak" },
    { "sentence": "He was fired for the leak of company secrets.", "ko": "그는 회사 비밀 누설로 해고되었다.", "word": "leak" },
    { "sentence": "Online security is the domain of experts.", "ko": "온라인 보안은 전문가들의 영역이다.", "word": "domain" },
    { "sentence": "The king traveled across his vast domain.", "ko": "왕은 그의 광대한 영토를 가로질러 여행했다.", "word": "domain" },
    { "sentence": "He tried to conceal his disappointment with a smile.", "ko": "그는 미소로 그의 실망감을 감추려 노력했다.", "word": "conceal" },
    { "sentence": "The pillars sustain the weight of the entire roof.", "ko": "기둥들이 지붕 전체의 무게를 지탱한다.", "word": "sustain" },
    { "sentence": "It is difficult to sustain a conversation with a stranger.", "ko": "낯선 사람과 대화를 유지하는 것은 어렵다.", "word": "sustain" },
    { "sentence": "Books in the library are classified by subject.", "ko": "도서관의 책들은 주제별로 분류된다.", "word": "classified" },
    { "sentence": "I assure you that everything will be fine.", "ko": "모든 것이 잘될 것이라고 당신에게 장담한다.", "word": "assure" },
    { "sentence": "Please assure yourself that the door is locked.", "ko": "문이 잠겼는지 스스로 확인하세요.", "word": "assure" },
    { "sentence": "The teacher tried to foster a sense of community.", "ko": "선생님은 공동체 의식을 발전시키려 노력했다.", "word": "foster" },
    { "sentence": "They decided to foster a child who needed a home.", "ko": "그들은 가정이 필요한 아이를 기르기로 결정했다.", "word": "foster" },
    { "sentence": "Smoking can cause permanent damage to your lungs.", "ko": "흡연은 폐에 영구적인 손상을 줄 수 있다.", "word": "permanent" },
    { "sentence": "The car accident proved fatal to the driver.", "ko": "그 자동차 사고는 운전자에게 치명적인 것으로 판명되었다.", "word": "fatal" },
    { "sentence": "Making a fatal mistake can ruin your career.", "ko": "결정적인 실수를 하는 것은 당신의 경력을 망칠 수 있다.", "word": "fatal" },
    { "sentence": "The company struggled to retain its best employees.", "ko": "회사는 최고의 직원들을 계속 보유하기 위해 애썼다.", "word": "retain" },
    { "sentence": "It's hard to keep up with the latest fashion trends.", "ko": "최신 패션 유행을 따라잡는 것은 힘들다.", "word": "keep up with" },
    { "sentence": "She reads the news daily to keep up with current events.", "ko": "그녀는 시사 문제에 대해 알기 위해 매일 뉴스를 읽는다.", "word": "keep up with" },
    { "sentence": "He still tries to keep up with his old school friends.", "ko": "그는 여전히 옛 학교 친구들과 계속 연락하고 지내려 노력한다.", "word": "keep up with" },
    { "sentence": "You should look up the word in a dictionary.", "ko": "당신은 사전에서 그 단어를 찾아보아야 한다.", "word": "look up" },
    { "sentence": "Look me up if you are ever in New York.", "ko": "혹시라도 뉴욕에 오게 되면 나를 방문해라.", "word": "look up" },
    { "sentence": "Women make up 50% of the workforce.", "ko": "여성이 노동력의 50%를 차지한다.", "word": "make up" },
    { "sentence": "He made up an excuse for being late.", "ko": "그는 늦은 것에 대해 변명을 지어냈다.", "word": "made up" },
    { "sentence": "The two friends finally made up after the fight.", "ko": "그 두 친구는 싸운 후에 마침내 화해했다.", "word": "made up" },
    { "sentence": "Nothing can make up for the loss of a loved one.", "ko": "어떤 것도 사랑하는 사람을 잃은 것에 대해 보상할 수 없다.", "word": "make up for" },
    { "sentence": "I will pick you up at the airport at 6 p.m.", "ko": "오후 6시에 공항으로 당신을 데리러 가겠다.", "word": "pick up" },
    { "sentence": "The economy is finally starting to pick up.", "ko": "경제가 마침내 좋아지기 시작하고 있다.", "word": "pick up" },
    { "sentence": "He picked up Spanish quickly while living in Madrid.", "ko": "그는 마드리드에 사는 동안 스페인어를 빨리 익혔다.", "word": "picked up" },
    { "sentence": "I can't put up with his constant complaining anymore.", "ko": "나는 더 이상 그의 끊임없는 불평을 참을 수 없다.", "word": "put up with" },
    { "sentence": "We need to set up a new security system.", "ko": "우리는 새로운 보안 시스템을 설치해야 한다.", "word": "set up" },
    { "sentence": "They set up a meeting for next Monday.", "ko": "그들은 다음 주 월요일로 회의를 준비했다.", "word": "set up" },
    { "sentence": "She set up her own business after graduating.", "ko": "그녀는 졸업 후 자신의 사업을 시작했다.", "word": "set up" },
    { "sentence": "This old sofa takes up too much space in the room.", "ko": "이 오래된 소파는 방에서 너무 많은 공간을 차지한다.", "word": "takes up" },
    { "sentence": "He decided to take up photography as a hobby.", "ko": "그는 취미로 사진 촬영을 시작하기로 결심했다.", "word": "take up" },
    { "sentence": "Could you turn up the volume of the radio?", "ko": "라디오 볼륨을 좀 높여 주시겠어요?", "word": "turn up" },
    { "sentence": "Don't worry; I'm sure your keys will turn up soon.", "ko": "걱정 마세요. 당신의 열쇠가 곧 나타날 것이라고 확신해요.", "word": "turn up" }
] };

    let currentSet = []; let idx = 0; let results = []; let studentName = "";

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    window.onload = function() {
        studentName = window.prompt("학생 이름을 입력하세요.", "");
        if (!studentName || !studentName.trim()) {
            document.querySelector('.container').innerHTML = '<h1>시험이 취소되었습니다. 새로고침 후 다시 시도하세요.</h1>';
            return;
        }
        studentName = studentName.trim();
        
        const unitKey = Object.keys(quizData)[0];
        if (!unitKey || !quizData[unitKey] || quizData[unitKey].length === 0) {
            document.querySelector('.container').innerHTML = '<h1>퀴즈 데이터를 불러올 수 없습니다.</h1>';
            return;
        }

        let allQuestions = quizData[unitKey];
        currentSet = shuffle([...allQuestions]).slice(0, 40);
        
        if (currentSet.length === 0) {
            document.querySelector('.container').innerHTML = '<h1>문제가 없습니다.</h1>';
            return;
        }
        
        idx = 0;
        results = [];
        document.getElementById('quiz-screen').classList.add('active');
        document.getElementById('unit-name').textContent = unitKey;
        showQ();
    };

    function showQ() {
        if (idx >= currentSet.length) {
            showResult();
            return;
        }
        const q = currentSet[idx];
        const blank = q.word[0] + "_".repeat(q.word.length - 1);
        const regex = new RegExp("\\b" + q.word + "\\b", "gi");
        document.getElementById('en-text').innerHTML = q.sentence.replace(regex, `<span class="blank">${blank}</span>`);
        document.getElementById('ko-text').textContent = q.ko;
        document.getElementById('progress').textContent = (idx + 1) + " / " + currentSet.length;
        document.getElementById('user-input').value = "";
        document.getElementById('user-input').focus();
    }

    function handleNext() {
        const userAns = document.getElementById('user-input').value.trim().toLowerCase();
        if (!userAns) return; // 빈칸 제출 방지
        const correctAns = currentSet[idx].word.toLowerCase();
        results.push({ q: currentSet[idx], user: userAns, isCorrect: userAns === correctAns });
        idx++;
        if (idx < currentSet.length) {
            showQ();
        } else {
            showResult();
        }
    }
    
    document.getElementById('user-input').addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            handleNext();
        }
    });

    function showResult() {
        document.getElementById('quiz-screen').classList.remove('active');
        document.getElementById('result-screen').classList.add('active');
        const correctCount = results.filter(r => r.isCorrect).length;
        document.getElementById('res-student').textContent = studentName + " 학생";
        document.getElementById('final-score').textContent = `총 ${results.length}문제 중 ${correctCount}문제 정답`;
        
        const listHtml = results.filter(r => !r.isCorrect).map(r => `
            <div class="wrong-item">
                <div style="margin-bottom:5px;">${r.q.sentence.replace(new RegExp(r.q.word, 'gi'), `<b style="color:red">${r.q.word}</b>`)}</div>
                <div style="font-size:12px; color:blue;">정답: <b class="correct-ans">${r.q.word}</b> | 입력: <b class="wrong-ans">${r.user || '미입력'}</b></div>
            </div>
        `).join('');
        document.getElementById('wrong-list').innerHTML = listHtml || "<div style='padding:20px; color:var(--success-green); font-weight:bold;'>만점입니다!</div>";
    }

    function downloadResult() {
        const correctCount = results.filter(r => r.isCorrect).length;
        const unitName = document.getElementById('unit-name').textContent;
        let content = `학생명 : ${studentName}\n유닛명 : ${unitName}\n점  수 : ${results.length} 중 ${correctCount}\n\n[오답 기록]\n`;
        results.filter(r => !r.isCorrect).forEach((r, i) => {
            content += `${i+1}. 정답: ${r.q.word}, 내 입력: ${r.user}\n   문장: ${r.q.sentence}\n\n`;
        });
        const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
        a.download = `결과_${studentName}_${unitName}.txt`;
        a.click();
    }
</script>
</body>
</html>
