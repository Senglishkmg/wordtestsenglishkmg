<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>어휘끝 수능 단어 시험 (Unit 31-40)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .correct-flash { animation: flash-green 0.5s; }
        .incorrect-flash { animation: flash-red 0.5s; }
        @keyframes flash-green { 50% { box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.5); } }
        @keyframes flash-red { 50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.5); } }
        #toast { transition: opacity 0.3s, transform 0.3s; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen font-sans">

    <div id="app-container" class="w-full max-w-2xl mx-auto bg-white shadow-xl rounded-lg p-4 sm:p-8">

        <!-- 사용자 정보 입력 화면 -->
        <div id="user-info-screen">
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-6">사용자 정보 입력</h1>
            <p class="text-center text-gray-600 mb-8">결과 저장에 사용될 정보를 입력해주세요.</p>
            <div class="space-y-4">
                <div><label for="school-input" class="block text-sm font-medium text-gray-700">학교</label><input type="text" id="school-input" class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm" placeholder="예: 새싹고등학교"></div>
                <div><label for="grade-input" class="block text-sm font-medium text-gray-700">학년</label><input type="text" id="grade-input" class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm" placeholder="예: 1"></div>
                <div><label for="name-input" class="block text-sm font-medium text-gray-700">이름</label><input type="text" id="name-input" class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm" placeholder="예: 홍길동"></div>
            </div>
            <button id="start-app-button" class="w-full mt-8 bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700">시험 시작하기</button>
        </div>

        <!-- 유닛 선택 화면 -->
        <div id="unit-selection-screen" class="hidden">
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-6">어휘끝 수능 단어 시험</h1>
            <p class="text-center text-gray-600 mb-8">시험 볼 유닛을 선택하세요. (Unit 31-40)</p>
            <div id="unit-buttons" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
        </div>

        <!-- 단어 시험 화면 -->
        <div id="test-screen" class="hidden">
            <div class="flex justify-between items-center mb-6"><h2 id="test-title" class="text-xl sm:text-2xl font-bold"></h2><div id="timer" class="text-lg font-semibold text-red-500 bg-red-100 px-4 py-2 rounded-lg">10:00</div></div>
            <div class="mb-6"><div class="w-full bg-gray-200 rounded-full h-2.5"><div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full"></div></div><p id="progress-text" class="text-center text-sm text-gray-600 mt-2"></p></div>
            <div id="question-container" class="text-center p-6 bg-gray-50 rounded-lg"><p id="question-type" class="text-sm font-semibold text-blue-600 mb-2"></p><p id="question" class="text-2xl sm:text-3xl font-medium mb-6 min-h-[72px] flex items-center justify-center"></p><input type="text" id="answer-input" class="w-full p-3 border rounded-lg text-lg text-center" placeholder="정답을 입력하세요"></div>
            <button id="next-button" class="w-full mt-6 bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700">다음</button>
        </div>

        <!-- 채점 결과 화면 -->
        <div id="results-screen" class="hidden">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-4">시험 결과</h2>
            <div id="score-container" class="text-5xl font-bold text-center py-8 mb-6 rounded-lg"><span id="final-score"></span><span class="text-3xl text-gray-500"> / 100</span></div>
            <h3 class="text-lg font-semibold mb-4">틀린 문제 목록</h3>
            <div class="overflow-x-auto border rounded-lg max-h-64">
                <table class="min-w-full divide-y"><thead class="bg-gray-50 sticky top-0"><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase">문제</th><th class="px-4 py-3 text-left text-xs font-medium uppercase">제출한 답</th><th class="px-4 py-3 text-left text-xs font-medium uppercase">정답</th><th class="px-4 py-3 text-left text-xs font-medium uppercase">점수</th></tr></thead><tbody id="incorrect-answers-body" class="bg-white divide-y"></tbody></table>
            </div>
            <div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4">
                <button id="save-results-button" class="w-full bg-green-500 text-white font-bold py-3 rounded-lg">결과 저장</button>
                <button id="retry-button" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">다시 풀기</button>
                <button id="home-button" class="w-full bg-gray-500 text-white font-bold py-3 rounded-lg">처음으로</button>
            </div>
        </div>
    </div>
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-800 text-white px-5 py-3 rounded-lg shadow-lg opacity-0 transform translate-y-5"></div>
    <script>
        const vocabularyData = {
            "Unit 31": [
                { word: "index", meaning: "1. 지표, 지수; 2. 색인" }, { word: "boom", meaning: "1. 호황; 2. (갑작스러운) 인기; 3. 쾅하고 울리는 소리; 호황을 누리다" }, { word: "soar", meaning: "(물가 등이) 급등하다; (하늘 높이) 치솟다" }, { word: "surge", meaning: "1. (물가 등이) 급등하다; 2. 밀려들다; 1. 급등; 2. 밀려듦" }, { word: "plunge", meaning: "(물가 등이) 급락하다, 떨어지다; 뛰어들다; 급락" }, { word: "inflation", meaning: "인플레이션, 물가상승; 팽창" }, { word: "fluctuate", meaning: "계속해서 변동하다, 오르내리다" }, { word: "fund", meaning: "자금; 자금을 대다" }, { word: "asset", meaning: "자산, 재산" }, { word: "sum", meaning: "1. 액수; 2. 총합, 합계" }, { word: "profit", meaning: "이익, 이득" }, { word: "revenue", meaning: "수입, 수익; 세입" }, { word: "margin", meaning: "1. 이윤, 이익; 2. (책 페이지의) 여백; 3. (득표수 등의) 차이" }, { word: "surplus", meaning: "흑자; 과잉; 과잉의" }, { word: "commission", meaning: "1. 수수료; 2. 위원회" }, { word: "cutback", meaning: "(비용, 인원 등의) 축소, 삭감" }, { word: "tax", meaning: "세금" }, { word: "monetary", meaning: "통화의, 화폐의" }, { word: "deposit", meaning: "1. 예금하다; (특히 안전한 곳에) 맡기다; 2. 침전시키다; 1. 예금; 2. 보증금; 3. 침전물" }, { word: "debt", meaning: "채무, 빚" }, { word: "loan", meaning: "대출(금); 빌려주다" }, { word: "mortgage", meaning: "담보 대출(금); 저당 잡히다" }, { word: "commerce", meaning: "상업; 무역" }, { word: "transaction", meaning: "거래, 매매; (업무) 처리" }, { word: "retail", meaning: "소매; 소매의; 소매로 팔다" }, { word: "import", meaning: "수입하다; 수입(품)" }, { word: "barter", meaning: "물물교환하다; 물물교환" }, { word: "monopoly", meaning: "(시장의) 독점, 전매" }, { word: "auction", meaning: "경매; 경매로 팔다" }, { word: "bid", meaning: "(특히 경매에서) 입찰하다, 값을 부르다; 입찰" }, { word: "bazaar", meaning: "바자(회)" }, { word: "vendor", meaning: "노점상, 행상인" }, { word: "merchandise", meaning: "(매매한) 물품, 상품" }, { word: "warehouse", meaning: "창고" }, { word: "stock", meaning: "1. 재고품; 2. 주식; 저장[비축]하다" }, { word: "inventory", meaning: "물품 목록; 재고품" }, { word: "bargain", meaning: "(정상가보다) 싸게 사는 물건; 흥정; 흥정하다" }, { word: "warrant", meaning: "(품질 등을) 보증하다; 보증(서)" }, { word: "brochure", meaning: "(안내, 광고용) 책자" }, { word: "withdraw", meaning: "1. 철회하다, 중단하다; 2. 철수하다; 3. 탈퇴하다; 기권하다; 4. 인출하다" }
            ],
            "Unit 32": [
                { word: "agriculture", meaning: "농업, 농사" }, { word: "peasant", meaning: "소작농, 농부" }, { word: "fertile", meaning: "비옥한, 기름진" }, { word: "compost", meaning: "퇴비; 퇴비를 주다" }, { word: "plow / plough", meaning: "쟁기; 쟁기로 갈다; 경작하다" }, { word: "reservoir", meaning: "1. 저수지; 2. 저장(소), 보고" }, { word: "irrigate", meaning: "관개하다, (땅에) 물을 대다" }, { word: "drain", meaning: "1. 물을 빼다; 2. (힘, 돈 등을) 소모시키다, 고갈시키다; 배수관" }, { word: "pesticide", meaning: "농약, 살충제" }, { word: "organic", meaning: "1. 유기농의; 2. 유기체의, 생물의" }, { word: "ripe", meaning: "(곡물, 과일이) 익은; 숙성한" }, { word: "harvest", meaning: "수확(물); 수확하다" }, { word: "crop", meaning: "농작물; 수확량" }, { word: "grain", meaning: "곡물; 알갱이" }, { word: "mill", meaning: "1. 방앗간; 2. 공장; (가루가 되도록) 갈다" }, { word: "orchard", meaning: "과수원" }, { word: "pasture", meaning: "초원, 목초지" }, { word: "livestock", meaning: "가축" }, { word: "herd", meaning: "떼, 무리; (무리를) 이끌다" }, { word: "hay", meaning: "건초, 말린 풀" }, { word: "graze", meaning: "풀을 뜯다; 방목하다" }, { word: "slaughter", meaning: "도살; 대학살; (가축을) 도살하다" }, { word: "log", meaning: "1. 통나무; 2. 일지; 1. 벌목하다; 2. 일지를 기록하다" }, { word: "timber", meaning: "목재; (목재용) 수목[산림]" }, { word: "fishery", meaning: "어장; 어업" }, { word: "industrialize / industrialise", meaning: "산업화하다, 공업화하다" }, { word: "manufacture", meaning: "제조하다, 생산하다; 제조, 생산; 제품" }, { word: "automate", meaning: "자동화하다" }, { word: "label", meaning: "상표, 라벨; 상표[라벨]를 붙이다" }, { word: "distribution", meaning: "1. (상품의) 유통; 2. 분배, 나누어 줌; 분포" }, { word: "article", meaning: "1. (신문, 잡지 등의) 기사; 2. (계약서 등의) 조항; 3. 물건, 물품" }, { word: "bulletin", meaning: "(뉴스) 속보; 공고, 게시" }, { word: "broadcast", meaning: "1. 방송하다; 2. 널리 알리다, 사방에 퍼뜨리다; 방송" }, { word: "dispatch", meaning: "보내다; 파견하다; 파견" }, { word: "relay", meaning: "(정보, 소식 등을) 전달하다; 중계하다; 1. 중계; 2. 릴레이 경주, 계주" }, { word: "publicity", meaning: "1. (언론의) 관심; 널리 알려짐; 2. 광고, 홍보" }, { word: "censor", meaning: "검열하다; 검열관" }, { word: "press", meaning: "1. 누르다, 압축하다; 2. 압박하다; 강요하다; 3. 인쇄(기); 4. 신문; 언론" }, { word: "current", meaning: "1. 현재의, 지금의; 2. 해류; 기류; 전류; 3. (특정 집단 사람들 사이의) 경향, 추세" }, { word: "cover", meaning: "1. 덮다, 씌우다; 덮개, 표지; 2. 다루다, 포함하다; 3. 취재하다, 보도하다; 4. (보험으로) 보장하다; 5. (돈을) 충당하다; 6. (언급된 거리를) 가다" }
            ],
            "Unit 33": [
                { word: "province", meaning: "1. 주, 도; 2. (수도 외의) 지방" }, { word: "district", meaning: "지역, 구역" }, { word: "metropolitan", meaning: "대도시의, 수도의" }, { word: "suburban", meaning: "교외의, 교외에 사는" }, { word: "infrastructure", meaning: "사회[공공] 기반시설" }, { word: "facility", meaning: "1. (편의) 시설; 2. 특성, 기능; 3. (타고난) 재능" }, { word: "endow", meaning: "1. 기부하다; 2. (재능 등을) 부여하다" }, { word: "wellbeing", meaning: "복지, 안녕" }, { word: "pension", meaning: "연금, 생활보조금" }, { word: "insure", meaning: "1. 보험에 들다; 2. 보장하다" }, { word: "hierarchy", meaning: "계급 (제도), 계층" }, { word: "imperial", meaning: "황제의; 제국의" }, { word: "lord", meaning: "1. (높은 신분의 남자) 귀족, -경; 2. (중세 유럽의) 영주; 3. 하느님, 주님" }, { word: "slave", meaning: "노예" }, { word: "civic", meaning: "1. 시민의, 공민의; 2. (도)시의" }, { word: "cluster", meaning: "무리, 떼; (작은 열매의) 송이; 무리를 이루다, 모이다" }, { word: "turmoil", meaning: "소란, 혼란" }, { word: "overpopulation", meaning: "인구 과잉" }, { word: "abuse", meaning: "1. 학대; 2. 남용, 오용; 1. 학대하다; 2. 남용하다, 오용하다" }, { word: "minority", meaning: "소수, 소수 집단; 소수(자)의" }, { word: "orphan", meaning: "고아; 고아로 만들다" }, { word: "bully", meaning: "괴롭히다, 따돌리다; 괴롭히는 사람" }, { word: "addict", meaning: "중독자; 중독시키다" }, { word: "exploit", meaning: "1. (부당하게) 이용하다; 착취하다; 2. (최대한) 활용하다; 개발하다" }, { word: "discriminate", meaning: "1. 차별하다; 2. 구별[식별]하다" }, { word: "segregate", meaning: "차별하다; 분리하다" }, { word: "constrain", meaning: "강요하다, 억지로 시키다; 제한[제약]하다" }, { word: "suicide", meaning: "자살" }, { word: "impoverish", meaning: "1. 빈곤[가난]하게 하다; 2. 품질을 저하시키다" }, { word: "underprivileged", meaning: "(사회, 경제적으로) 혜택을 못 받는" }, { word: "needy", meaning: "(경제적으로) 어려운, 궁핍한" }, { word: "famine", meaning: "기근, 굶주림" }, { word: "starvation", meaning: "기아, 굶주림" }, { word: "plight", meaning: "역경, 곤경" }, { word: "tackle", meaning: "1. (문제 등을) 다루다, (힘든 상황 등과) 씨름하다; 2. 태클하다, 공을 뺏다; 태클" }, { word: "eradicate", meaning: "없애다, 근절하다" }, { word: "subsidy", meaning: "(국가 등이 제공하는) 보조금, 장려금" }, { word: "harmonize", meaning: "조화를 이루다, 조화시키다" }, { word: "strike", meaning: "1. (손이나 무기로) 치다; 공격하다; 2. 충돌하다, 부딪히다; 3. 파업; 파업하다; 4. 떠오르다, 생각나다; 5. 발생하다; 덮치다" }, { word: "stake", meaning: "1. 말뚝; 2. 지분; 3. 이해관계; 4. (내기, 도박 등에) 건 돈; (돈 등을) 걸다" }
            ],
            "Unit 34": [
                { word: "statesman", meaning: "(경험 많고 존경받는) 정치가" }, { word: "regime", meaning: "1. (특히 비민주적인) 정권; 2. 제도, 체제" }, { word: "propaganda", meaning: "선전" }, { word: "dynasty", meaning: "왕가, 왕조" }, { word: "throne", meaning: "왕좌; 왕위" }, { word: "realm", meaning: "1. (지식, 활동 등의) 영역, 범위; 2. 왕국" }, { word: "monarchy", meaning: "군주제; 군주국" }, { word: "municipal", meaning: "지방 자치제의, 시의" }, { word: "reign", meaning: "통치하다, 지배하다; 통치 (기간)" }, { word: "federal", meaning: "연방제의; 연방정부의" }, { word: "autonomy", meaning: "1. 자치권; 2. 자율(성)" }, { word: "sovereign", meaning: "1. (국가가) 자주적인, 독립된; 2. 최고 권력을 지닌; 군주, 국왕" }, { word: "tyrant", meaning: "폭군, 독재자; 폭군 같은 사람" }, { word: "slogan", meaning: "(정당, 광고 등의) 구호, 슬로건" }, { word: "scheme", meaning: "1. (정부나 정당의) 계획; 2. 책략; 1. 계획하다; 2. 책략을 꾸미다" }, { word: "nominate", meaning: "1. (중요 지위, 수상자 등의 후보자로) 지명하다; 2. (어떤 일을 하도록) 임명하다" }, { word: "parliament", meaning: "의회, 국회" }, { word: "chairperson", meaning: "(회의, 위원회, 조직 등의) 의장; 회장" }, { word: "agenda", meaning: "의제, 안건" }, { word: "chamber", meaning: "(특정 목적의) -실; (의회의) 회의실" }, { word: "elect", meaning: "선거하다, 선출하다" }, { word: "ballot", meaning: "무기명[비밀] 투표; 투표용지; 무기명 투표를 하다" }, { word: "mandate", meaning: "1. 권한을 주다; 2. 지시하다, 명령하다; 1. (선거에 의해 정부나 정당에 주어진) 권한; 2. 지시" }, { word: "rally", meaning: "(특히 정치적) 집회; (지지를 위해) 결집[단결]하다" }, { word: "rebel", meaning: "반란을 일으키다, 반항[저항]하다; 반역자" }, { word: "intrigue", meaning: "(정치적인) 모의, 음모; 1. 음모를 꾸미다; 2. 강한 흥미를 불러일으키다" }, { word: "overthrow", meaning: "(정부, 제도 등을) 뒤엎다, 전복시키다; 전복, 타도" }, { word: "exile", meaning: "추방하다, 유배하다; 추방; 망명(자)" }, { word: "assassination", meaning: "암살" }, { word: "ambassador", meaning: "1. 대사; 2. 대표, 사절" }, { word: "embassy", meaning: "대사관" }, { word: "diplomat", meaning: "외교관" }, { word: "delegate", meaning: "(집단의 의사를 대표하는) 대표자, 사절; 대표로 임명하다" }, { word: "counterpart", meaning: "상대; 대응 관계에 있는 사람" }, { word: "ally", meaning: "동맹국, 연합국; 동맹시키다" }, { word: "treaty", meaning: "조약, 협정" }, { word: "summit", meaning: "1. 정상 회담; 2. 꼭대기, 정상" }, { word: "bar", meaning: "1. 막대기 (모양의 것); 2. 술집, 바; (특정 음식, 음료를 파는) 전문점; 3. 변호사(직); 법정; 4. 장애(물); 막다, 금하다" }, { word: "party", meaning: "1. (공동의 목적을 가진) 일행, 단체; 2. 파티, 모임; 3. (정치) 정당; 4. (계약) 당사자" }, { word: "term", meaning: "1. 기간; 학기; 임기; 2. 용어, 말; 3. 조건, 조항; 4. 관점, 면; 5. 관계, 사이" }
            ],
            "Unit 35": [
                { word: "corporation", meaning: "(큰 규모의) 기업, 회사" }, { word: "incorporate", meaning: "1. (법인 회사를) 설립하다; 2. 포함하다" }, { word: "enterprise", meaning: "1. 기업, 회사; 2. (대규모) 사업; 3. 진취성" }, { word: "merge", meaning: "합병하다; 합치다" }, { word: "headquarters", meaning: "본사; 본부" }, { word: "executive", meaning: "1. 임원, 경영진; 2. 행정부; 1. 경영의; 2. 행정[집행]의" }, { word: "subordinate", meaning: "부하, 하급자; 1. 하급의; 2. 부수적인, 부차적인; ~보다 아래에 두다" }, { word: "personnel", meaning: "(조직의) 인원, 직원들; 인사과" }, { word: "vocation", meaning: "1. 천직, 직업; 2. 소명 (의식), 사명감" }, { word: "recruit", meaning: "모집하다, 뽑다; 신입사원, 신병" }, { word: "resume", meaning: "이력서; 다시 시작하다" }, { word: "qualify", meaning: "자격을 주다[얻다]" }, { word: "designate", meaning: "1. 지정[지적]하다; 2. (특정한 직책에) 지명하다; (직책에) 지명된" }, { word: "resign", meaning: "사직하다, 사임하다" }, { word: "wage(s)", meaning: "(시간, 주 등의 단위로 받는) 임금, 급료" }, { word: "incentive", meaning: "우대책, 장려(금); 동기부여" }, { word: "confidential", meaning: "1. 기밀의, 비밀의; 2. 신뢰받는, 신임하는" }, { word: "seal", meaning: "1. 직인, 도장; 2. 바다표범; 봉하다" }, { word: "justice", meaning: "1. 정의; 공정, 정당성; 2. 사법, 재판(관)" }, { word: "authorize", meaning: "권한을 부여하다, 허가하다" }, { word: "sanction", meaning: "1. 허가, 승인; 2. 제재; 처벌; 1. 허가[승인]하다; 2. 제재를 가하다" }, { word: "oblige", meaning: "의무적으로 ~하게 하다; 강요하다" }, { word: "ban", meaning: "(공식적으로) 금지하다; 금지" }, { word: "prohibit", meaning: "(법률, 권한에 따라) 금지하다" }, { word: "condemn", meaning: "1. 비난하다, 규탄하다; 2. 선고를 내리다" }, { word: "legislate", meaning: "입법하다, 법률을 제정하다" }, { word: "legalize", meaning: "합법화하다" }, { word: "amend", meaning: "(법안 등을) 개정하다, 고치다" }, { word: "abolish", meaning: "(법, 제도 등을) 폐지하다" }, { word: "copyright", meaning: "저작권, 판권" }, { word: "patent", meaning: "특허(권); 특허를 받다" }, { word: "uphold", meaning: "1. (법, 제도 등을) 지키다; 지지[유지]하다; 2. (판결 등을) 확인하다; 인정하다" }, { word: "legitimate", meaning: "1. 법률(상)의; 합법적인; 2. 정당한, 타당한" }, { word: "comply", meaning: "(법, 명령 등을) 준수하다, 따르다" }, { word: "violate", meaning: "위반하다; 침해하다" }, { word: "infringe", meaning: "(법률 등을) 위반하다; (법적 권리를) 침해하다" }, { word: "liable", meaning: "1. 법적 책임이 있는; 2. ~하기 쉬운" }, { word: "apply", meaning: "1. 지원하다, 신청하다; 2. 적용하다, 응용하다; 3. 바르다" }, { word: "promote", meaning: "1. 촉진하다, 장려하다; 2. 홍보하다; 3. 승진[진급]시키다" }, { word: "project", meaning: "1. 과제; 계획; 계획하다; 2. 예상하다, 추정하다; 3. 비추다, 투영하다" }
            ],
            "Unit 36": [
                { word: "offense / offence", meaning: "1. 범죄; 범법; 2. 불쾌하게 하는 것; 3. 공격(법)" }, { word: "wrongdoing", meaning: "범법[부정] 행위; 비행" }, { word: "fraud", meaning: "사기(꾼), 속임" }, { word: "villain", meaning: "(연극, 이야기 등의) 악역; 나쁜 사람, 악인" }, { word: "bribe", meaning: "뇌물; 뇌물을 주다, 매수하다" }, { word: "rob", meaning: "도둑질하다, 강탈하다" }, { word: "pirate", meaning: "1. 해적; 2. 저작권 침해자, 표절자; 표절하다, 저작권을 침해하다" }, { word: "forge", meaning: "1. 위조[날조]하다, 꾸며내다; 2. 만들어내다, 구축하다" }, { word: "falsify", meaning: "(문서 등을) 위조하다, 조작하다" }, { word: "fabricate", meaning: "1. (거짓 정보를) 날조하다, 조작하다; 2. 만들다, 조립하다" }, { word: "menace", meaning: "위협, 협박; 위협하다" }, { word: "hostage", meaning: "인질, 볼모" }, { word: "confederate", meaning: "1. 공범, 공모자; 2. 동맹[연합]국; 동맹하다; 동맹의, 연합한" }, { word: "sue", meaning: "고소하다, 소송을 제기하다" }, { word: "lawsuit", meaning: "소송, 고소" }, { word: "defendant", meaning: "피고" }, { word: "attorney", meaning: "변호사; (특히 법률문제의) 대리인" }, { word: "petition", meaning: "(법원에 법률적 처리를 요청하는) 청원(서), 탄원(서); 청원[탄원]하다" }, { word: "patrol", meaning: "순찰(대); 순찰을 돌다" }, { word: "apprehend", meaning: "1. 체포하다; 2. 이해하다, 파악하다" }, { word: "summon", meaning: "소환하다, 호출하다" }, { word: "scrutiny", meaning: "정밀 조사, 철저한 검토" }, { word: "surveillance", meaning: "(용의자, 죄수의) 감시" }, { word: "interrogate", meaning: "심문하다; 질문하다" }, { word: "torture", meaning: "고문; 심한 고통; 고문하다, 괴롭히다" }, { word: "confess", meaning: "1. (죄, 잘못을) 자백하다, 인정하다; 2. 고백하다" }, { word: "prosecute", meaning: "기소하다, 공소를 제기하다" }, { word: "plead", meaning: "1. (피고가 재판에서 자신의 유무죄를) 주장하다; 2. 변호하다; 3. 애원하다, 간청하다" }, { word: "testify", meaning: "1. (법정에서) 증언하다, 진술하다; 2. 증명하다" }, { word: "jury", meaning: "배심원(단); 심사위원단" }, { word: "verdict", meaning: "1. (배심원단의) 평결; 2. 의견, 결정" }, { word: "innocence", meaning: "1. 무죄, 결백; 2. 순진, 천진난만" }, { word: "convict", meaning: "유죄를 선고하다[입증하다]" }, { word: "punishment", meaning: "처벌, 벌" }, { word: "penalty", meaning: "1. 형벌, 처벌; 벌금; 2. 불이익" }, { word: "imprison", meaning: "투옥하다, 감금하다" }, { word: "commit", meaning: "1. (범죄 등을) 저지르다; 2. 약속하다; 3. 전념하다, 헌신하다" }, { word: "attribute", meaning: "1. (~의) 탓[덕]으로 보다; 2. (~의) 것이라고 하다; 3. (성질 등이) 있다고 생각하다; 4. 속성, 자질" }, { word: "resolve", meaning: "1. 분해하다; 2. (문제 등을) 풀다, 해결하다; 3. 결심하다; 결의하다; 결심; 결의" }, { word: "release", meaning: "1. 석방하다; 석방; 2. 발매하다, 개봉하다; 발매, 개봉; 3. 방출하다, 내뿜다; 방출" }
            ],
            "Unit 37": [
                { word: "military", meaning: "군사의, 무력의; 군인들, 군대" }, { word: "enlist", meaning: "1. 입대하다, 징집하다; 2. (협조, 참여를) 요청하다" }, { word: "martial", meaning: "군대의; 전쟁의; 호전적인" }, { word: "troop", meaning: "1. (대규모의) 병력, 군대; 2. 무리" }, { word: "corps", meaning: "1. 군단, 부대; 2. (특정한 활동을 하는) 단체, 집단" }, { word: "navy", meaning: "해군" }, { word: "admiral", meaning: "해군 대장, 제독" }, { word: "fleet", meaning: "(해군) 함대, 선단" }, { word: "veteran", meaning: "1. 퇴역 군인; 2. 전문가; 노련한, 경험이 많은" }, { word: "deployment", meaning: "1. (군대, 무기의) 배치; 2. (인력, 자원 등의 효율적인) 투입, 동원" }, { word: "array", meaning: "(군대를) 정렬시키다; (보기 좋게) 배열하다; 정렬; 배열" }, { word: "salute", meaning: "1. 경례하다; 2. 인사하다; 경례" }, { word: "march", meaning: "1. 행진하다, 행군하다; 2. 가두행진하다; 1. 행진, 행군; 2. 가두행진" }, { word: "escort", meaning: "호위[호송]하다, 에스코트하다; 호위대" }, { word: "warfare", meaning: "전쟁, 교전 상태; 투쟁, 싸움" }, { word: "combat", meaning: "전투, 싸움; 싸우다" }, { word: "battlefield", meaning: "전쟁터, 전장; 논쟁[갈등]의 장" }, { word: "fort", meaning: "요새, 보루" }, { word: "foe", meaning: "적, 원수" }, { word: "command", meaning: "1. 명령하다; 2. 지휘하다; 통제하다; 3. (경치가) 내려다보이다; 1. 명령; 2. 지휘; 통제" }, { word: "bombard", meaning: "폭격하다; (질문, 비난 등을) 퍼붓다" }, { word: "besiege", meaning: "(도시 등을) 포위하다; 둘러싸다" }, { word: "assault", meaning: "폭행, 공격; 폭행하다, 공격하다" }, { word: "retreat", meaning: "1. 후퇴하다; 물러서다; 2. (생각, 태도 등을) 철회하다, 바꾸다; 1. 후퇴; 2. 철회" }, { word: "refuge", meaning: "피난(처), 도피(처)" }, { word: "captive", meaning: "포로의; 사로잡힌; 포로" }, { word: "surrender", meaning: "1. 항복하다; 2. (권리 등을) 포기하다, 넘겨주다" }, { word: "colony", meaning: "식민지" }, { word: "tactic(s)", meaning: "전술; 전략, 작전" }, { word: "disguise", meaning: "1. 변장하다, 위장하다; 2. 숨기다, 감추다; 변장, 위장" }, { word: "camouflage", meaning: "위장하다, 감추다; 위장" }, { word: "ambush", meaning: "잠복, 매복; 매복했다가 습격하다" }, { word: "raid", meaning: "1. 습격하다, 급습하다; 2. 침입하다; 1. 습격, 급습; 2. (불법) 침입" }, { word: "bullet", meaning: "총알, 탄환" }, { word: "cannon", meaning: "대포" }, { word: "spear", meaning: "창, 투창" }, { word: "armor", meaning: "갑옷" }, { word: "shot", meaning: "1. 발사, 발포; 총알; 2. 차기, 던지기, 타격; 3. 주사; 4. 시도; 5. 촬영, 사진" }, { word: "yield", meaning: "1. 생산하다, 초래하다; (농작물 등의) 산출량; 2. 굴복하다, 항복하다; 3. 양보하다" }, { word: "associate", meaning: "1. 연상시키다, 관련짓다; 2. 어울리다, 교제하다; 동료, 친구; 3. 협력[연합]하다; 제휴한" }
            ],
            "Unit 38": [
                { word: "transport", meaning: "운송하다; 이동시키다; 운송 (수단); 이동" }, { word: "transit", meaning: "1. 운송, 수송; 2. 통과, 통행" }, { word: "compartment", meaning: "1. (기차 등의) 객실; 2. 칸; 칸막이" }, { word: "cargo", meaning: "(선박, 비행기의) 화물" }, { word: "freight", meaning: "화물; 화물 운송; 화물로 보내다" }, { word: "overload", meaning: "과적하다, 짐을 너무 많이 싣다; 부담 주다; 과적, 너무 많은 짐" }, { word: "fare", meaning: "(교통) 요금, 운임" }, { word: "pedestrian", meaning: "보행자; 보행자의" }, { word: "crossroads", meaning: "1. 교차로, 네거리; 2. (중요한) 갈림길, 기로" }, { word: "alley", meaning: "골목길, 오솔길" }, { word: "verge", meaning: "1. 도로변, 길가; 가장자리; 2. 경계, 한계; 직전" }, { word: "pavement", meaning: "포장도로; 인도, 보도" }, { word: "lane", meaning: "차선; 좁은 길" }, { word: "highway", meaning: "고속도로, (시내와 연결된) 간선도로" }, { word: "toll", meaning: "1. 통행료; 2. (전쟁, 재난 등의) 사상자[희생자] 수; 1. (요금을) 징수하다; 2. (종이) 울리다" }, { word: "congestion", meaning: "혼잡, 정체" }, { word: "stuck", meaning: "(~에 빠져) 움직일 수 없는, 꼼짝 못하는" }, { word: "horn", meaning: "1. (차량의) 경적; 2. (동물의) 뿔" }, { word: "bypass", meaning: "우회하다; 우회 도로" }, { word: "tow", meaning: "견인하다, 끌다; 견인" }, { word: "raft", meaning: "뗏목; 고무보트; 뗏목을 타다" }, { word: "paddle", meaning: "(고정되지 않은 짧은) 노; 노를 젓다" }, { word: "shipping", meaning: "1. 선박, 배; 2. 해상 운송" }, { word: "vessel", meaning: "1. (대형) 선박, 배; 2. 그릇, 용기; 3. 혈관, 맥관" }, { word: "deck", meaning: "갑판" }, { word: "harbor / harbour", meaning: "1. 항구; 2. 피난처; 1. 항구에 정박하다; 2. (생각을) 품다; 3. 숨겨주다" }, { word: "port", meaning: "항구(도시), 항만" }, { word: "dock", meaning: "선착장, 부두; (배를) 부두에 대다" }, { word: "anchor", meaning: "1. 닻; 2. (뉴스) 앵커, 아나운서; 닻을 내리다; 고정시키다" }, { word: "embark", meaning: "1. (배에) 승선하다; 짐을 싣다; 2. 착수하다, 시작하다" }, { word: "canal", meaning: "운하, 수로" }, { word: "steer", meaning: "1. (탈것을) 조종하다; 나아가다; 2. (사람이나 상황을) 인도하다, 이끌다" }, { word: "navigate", meaning: "1. 항해하다, (탈것을) 조종하다; 2. (지도 등을 보고) 길을 찾다, 방향을 읽다" }, { word: "wreck", meaning: "난파(선), 조난; 난파시키다" }, { word: "aviation", meaning: "비행, 항공" }, { word: "aircraft", meaning: "항공기" }, { word: "runway", meaning: "1. 활주로; 2. (패션쇼장의) 무대" }, { word: "crew", meaning: "1. 승무원, 선원; 2. (함께 일을 하는) 팀, 반, 조" }, { word: "board", meaning: "1. 판자, -판; 게시판; 2. (숙박업소 등의) 식사; 하숙하다; 3. (비행기, 배 등에) 탑승하다; 4. 위원회, 이사회" }, { word: "even", meaning: "1. 평평한, 반반한; 2. 균등한; 일정한; 3. 대등한, 피장파장인; 4. 짝수의; 5. 차분한" }
            ],
            "Unit 39": [
                { word: "chore", meaning: "(정기적으로 하는) 일, 허드렛일; 하기 싫은 지루한 일" }, { word: "errand", meaning: "심부름, 잡일" }, { word: "vacuum", meaning: "진공; 진공청소기; 진공청소기로 청소하다" }, { word: "detergent", meaning: "세제, 세정제" }, { word: "utensil", meaning: "(특히 가정용) 기구, 도구" }, { word: "gear", meaning: "1. 톱니바퀴, 기어; 2. (특정 활동을 위한) 장비; 의복; 맞게 하다, 조정하다" }, { word: "textile", meaning: "직물, 옷감; 직물의, 방직의" }, { word: "weave", meaning: "(옷감 등을) 짜다, 엮다" }, { word: "garment", meaning: "옷, 의류" }, { word: "wrinkle", meaning: "주름; 주름지다; 주름을 잡다, (얼굴 등을) 찡그리다" }, { word: "stain", meaning: "얼룩, 때; 오점; 얼룩지게 하다" }, { word: "ragged", meaning: "1. 낡아빠진, 남루한; 2. (표면 등이) 고르지 못한" }, { word: "ornament", meaning: "장식(품); 장식하다" }, { word: "cosmetic(s)", meaning: "화장품; 1. 미용의, 성형의; 2. 표면적인, 겉치레에 불과한" }, { word: "appetite", meaning: "1. 식욕; 2. 욕구, 욕망" }, { word: "feast", meaning: "축제, 잔치" }, { word: "beverage", meaning: "(물이 아닌) 음료, 마실 것" }, { word: "edible", meaning: "먹을 수 있는, 식용의" }, { word: "dine", meaning: "식사하다, 만찬을 들다" }, { word: "devour", meaning: "1. 게걸스레 먹다; 집어 삼키다; 2. (엄청난 관심과 열의로) 탐독하다, 뚫어지게 보다" }, { word: "lick", meaning: "핥아먹다, 핥다" }, { word: "reside", meaning: "거주하다, 살다" }, { word: "dwell", meaning: "1. 거주하다, 살다; 2. (어떤 상태에) 머무르다, 못 떠나다" }, { word: "inhabit", meaning: "거주하다, 살다; 서식하다" }, { word: "sedentary", meaning: "1. (활동 등이) 주로 앉아서 하는; 2. 한 곳에 머물러 사는" }, { word: "estate", meaning: "1. 사유지, 토지; 2. 자산, 재산" }, { word: "erect", meaning: "1. 건설하다; 2. (똑바로) 세우다; 똑바로 선" }, { word: "ventilate", meaning: "환기하다" }, { word: "furnish", meaning: "1. (가구 등을) 비치하다; 2. 제공하다, 공급하다" }, { word: "renovation", meaning: "(낡고 오래된 것의) 수리; 혁신" }, { word: "shelter", meaning: "피신처; 보호소; 보호하다" }, { word: "lease", meaning: "임대차 계약; 임대[임차]하다" }, { word: "rent", meaning: "집세, 임대[임차]료; 임대[임차]하다" }, { word: "tenant", meaning: "세입자, 임차인" }, { word: "spacious", meaning: "(공간, 방이) 넓은, 훤히 트인" }, { word: "cozy", meaning: "아늑한, 안락한" }, { word: "housewarming", meaning: "집들이" }, { word: "bound", meaning: "1. 묶인; 2. (~할) 의무가 있는; 3. 반드시 ~하게 되어 있는; 4. 뛰다, (공 등이) 튀어 오르다; 도약; 5. 인접하다; 경계를 짓다; 경계; 6. 한계, 범위; 7. ~로 향하는,~행의" }, { word: "serve", meaning: "1. (식당 등에서) 음식을 제공하다, 상에 차려주다; 2. 도움이 되다, 기여하다; (필요로 하는 것을) 제공하다; 3. (특정 용도로) 쓰일 수 있다, 적합하다; 4. 일하다, 복무하다; 5. (교도소에서) 복역하다; 6. (테니스 등에서) 서브를 넣다" }, { word: "attend", meaning: "1. 주의를 기울이다, 신경을 쓰다; 2. 간호하다, 돌보다; 3. 가다, 참석하다" }
            ],
            "Unit 40": [
                { word: "rehearsal", meaning: "예행연습, 리허설" }, { word: "monologue", meaning: "독백; 1인극" }, { word: "applause", meaning: "박수갈채" }, { word: "acclaim", meaning: "칭송하다, 환호하다; 칭송" }, { word: "craftsman", meaning: "공예가; 장인" }, { word: "prolific", meaning: "(화가, 작가 등이) 다작하는; 다산의, 풍부한" }, { word: "patron", meaning: "1. 후원자, 후원 단체; 2. 고객; 단골" }, { word: "exposition", meaning: "1. 전시회, 박람회; 2. (상세한) 설명, 해설" }, { word: "curator", meaning: "(박물관, 미술관 등의) 전시 책임자, 큐레이터" }, { word: "mold", meaning: "1. 틀, 거푸집; 2. 곰팡이; (틀에 넣어) 만들다" }, { word: "pottery", meaning: "도자기; 도예" }, { word: "sculpt", meaning: "조각하다; 형태를 만들다" }, { word: "carve", meaning: "조각하다; 새기다" }, { word: "authentic", meaning: "진짜의, 진품의; 진실된; 진심의" }, { word: "aesthetic", meaning: "미의; 심미적인; 미적 특징; 미학" }, { word: "exquisite", meaning: "매우 아름다운; 정교한" }, { word: "symphony", meaning: "교향곡, 심포니" }, { word: "choir", meaning: "합창단, 성가대; 합창하다" }, { word: "tune", meaning: "곡, 선율; 1. 조율하다; 2. (방송 채널 등을) 맞추다, 조정하다" }, { word: "vocal", meaning: "목소리의, 음성의; 보컬" }, { word: "athlete", meaning: "운동선수" }, { word: "referee", meaning: "심판; 심판하다, 중재하다" }, { word: "gymnasium / gym", meaning: "체육관" }, { word: "gymnastics", meaning: "체조, 체육" }, { word: "league", meaning: "1. 경기 연맹, 리그; 2. 연합, 연맹" }, { word: "pastime", meaning: "오락, 취미, 여가 활동" }, { word: "stroll", meaning: "산책; 산책하다, 한가로이 거닐다" }, { word: "ascend", meaning: "오르다, 올라가다" }, { word: "descend", meaning: "하강하다, 내려오다" }, { word: "itinerary", meaning: "여행 일정(표)" }, { word: "reserve", meaning: "1. 예약하다; 2. (훗날을 위해) 비축하다, 남겨두다" }, { word: "accommodate", meaning: "1. 숙박시키다, (사람을) 수용하다; 2. (새로운 상황에) 적응하다" }, { word: "reception", meaning: "1. 접수처, 안내 데스크; 2. 환영(회); 3. (전화 등의) 수신 (상태)" }, { word: "excursion", meaning: "짧은 여행, 소풍" }, { word: "expedition", meaning: "탐험[원정](대)" }, { word: "scenery", meaning: "경치, 풍경; 배경" }, { word: "landscape", meaning: "풍경, 경치; 조경하다, 경치를 꾸미다" }, { word: "exotic", meaning: "이국적인; 외국의" }, { word: "breathtaking", meaning: "숨이 막히는 듯한, 깜짝 놀랄만한" }, { word: "direct", meaning: "1. 직접적인; 2. 직행의, 직통의; 3. 명령하다, 지시하다; 4. 길을 가르쳐주다; 5. 지도[감독]하다; (연극, 영화 등을) 연출[감독]하다" }
            ]
        };
        // --- 이하 스크립트 코드는 이전 앱들과 동일 ---
        let userInfo = {};
        let currentUnit='',questions=[],currentQuestionIndex=0,userAnswers=[],timerInterval;
        const userInfoScreen = document.getElementById('user-info-screen');
        const unitSelectionScreen=document.getElementById('unit-selection-screen');
        const testScreen=document.getElementById('test-screen');
        const resultsScreen=document.getElementById('results-screen');
        const schoolInput = document.getElementById('school-input');
        const gradeInput = document.getElementById('grade-input');
        const nameInput = document.getElementById('name-input');
        const startAppButton = document.getElementById('start-app-button');
        const unitButtonsContainer=document.getElementById('unit-buttons');
        const testTitle=document.getElementById('test-title');
        const timerDisplay=document.getElementById('timer');
        const progressBar=document.getElementById('progress-bar');
        const progressText=document.getElementById('progress-text');
        const questionType=document.getElementById('question-type');
        const questionEl=document.getElementById('question');
        const answerInput=document.getElementById('answer-input');
        const nextButton=document.getElementById('next-button');
        const finalScore=document.getElementById('final-score');
        const incorrectAnswersBody=document.getElementById('incorrect-answers-body');
        const saveResultsButton=document.getElementById('save-results-button');
        const retryButton=document.getElementById('retry-button');
        const homeButton=document.getElementById('home-button');
        
        function init(){
            Object.keys(vocabularyData).sort((a,b)=>parseInt(a.match(/\d+/)[0])-parseInt(b.match(/\d+/)[0])).forEach(unit=>{const button=document.createElement('button');button.textContent=unit;button.className='bg-white text-gray-700 font-semibold py-4 px-2 rounded-lg shadow hover:bg-gray-200 border border-gray-200 transition-all duration-200';button.onclick=()=>startTest(unit);unitButtonsContainer.appendChild(button)});
            startAppButton.addEventListener('click', startApp);
            nextButton.addEventListener('click',handleNext);
            answerInput.addEventListener('keyup',e=>{if(e.key==='Enter'){handleNext()}});
            retryButton.addEventListener('click',()=>startTest(currentUnit));
            homeButton.addEventListener('click',()=>showScreen(unitSelectionScreen));
            saveResultsButton.addEventListener('click',saveResults);
            showScreen(userInfoScreen);
        }

        function startApp() {
            const school = schoolInput.value.trim();
            const grade = gradeInput.value.trim();
            const name = nameInput.value.trim();
            if (!school || !grade || !name) {
                showToast("모든 정보를 입력해주세요.");
                return;
            }
            userInfo = { school, grade, name };
            showScreen(unitSelectionScreen);
        }

        function showScreen(screen){
            [userInfoScreen, unitSelectionScreen,testScreen,resultsScreen].forEach(s=>s.classList.add('hidden'));
            screen.classList.remove('hidden');
        }

        async function saveResults(){
            const score=finalScore.textContent;
            let title = `${userInfo.school} ${userInfo.grade}학년 ${userInfo.name}의 ${currentUnit} 시험지`;
            let resultsText = `${title}\n\n총점: ${score}점\n\n--- 틀린 문제 목록 ---\n`;
            const incorrectRows=incorrectAnswersBody.querySelectorAll('tr');
            if(incorrectRows.length===1&&incorrectRows[0].children[0].colSpan===4){
                resultsText+="틀린 문제가 없습니다."
            } else {
                incorrectRows.forEach(row=>{
                    const cells=row.querySelectorAll('td');
                    resultsText+=`문제: ${cells[0].textContent}\n`;
                    resultsText+=`제출 답: ${cells[1].textContent}\n`;
                    resultsText+=`정답: ${cells[2].textContent}\n`;
                    resultsText+=`점수: ${cells[3].textContent}\n\n`;
                });
            }
            try{
                await navigator.clipboard.writeText(resultsText.trim());
                showToast('시험 결과가 클립보드에 복사되었습니다.');
            } catch(err) {
                console.error('클립보드 복사 실패:',err);
                showToast('결과 복사에 실패했습니다.');
            }
        }
        
        function startTest(unit){currentUnit=unit;let unitWords=[...vocabularyData[unit]];questions=[];userAnswers=[];currentQuestionIndex=0;unitWords.sort(()=>0.5-Math.random());const numQuestions=Math.min(20,unitWords.length);const selectedWords=unitWords.slice(0,numQuestions);const half=Math.ceil(numQuestions/2);for(let i=0;i<numQuestions;i++){const wordData=selectedWords[i];const type=i<half?'spelling':'meaning';questions.push({type:type,word:wordData.word,meaning:wordData.meaning,originalQuestion:type==='spelling'?wordData.meaning:wordData.word})}
        questions.sort(()=>0.5-Math.random());testTitle.textContent=`${unit} 단어 시험`;showScreen(testScreen);displayQuestion();startTimer()}
        function displayQuestion(){if(currentQuestionIndex>=questions.length){submitTest();return}
        const q=questions[currentQuestionIndex];if(q.type==='spelling'){questionType.textContent='의미를 보고 철자 맞히기';questionEl.textContent=q.meaning.replace(/(\d+\.\s*)|[()]/g,'').replace(/;/g,', ')}else{questionType.textContent='철자를 보고 의미 맞히기';questionEl.textContent=q.word}
        answerInput.value='';answerInput.focus();updateProgress();if(currentQuestionIndex===questions.length-1){nextButton.textContent='채점하기'}else{nextButton.textContent='다음'}}
        function handleNext(){const answer=answerInput.value.trim();if(!answer){answerInput.classList.add('incorrect-flash');setTimeout(()=>answerInput.classList.remove('incorrect-flash'),500);return}
        userAnswers[currentQuestionIndex]=answer;const isCorrectAnswer=isAnswerInitiallyCorrect(questions[currentQuestionIndex],answer);answerInput.classList.add(isCorrectAnswer?'correct-flash':'incorrect-flash');setTimeout(()=>answerInput.classList.remove('correct-flash','incorrect-flash'),500);setTimeout(()=>{currentQuestionIndex++;displayQuestion()},300)}
        function isAnswerInitiallyCorrect(question,answer){if(question.type==='spelling'){return question.word.toLowerCase()===answer.toLowerCase()}else{const cleanCorrectAnswer=question.meaning.toLowerCase().replace(/(\d+\.\s*)|[()]/g,'');const userFirstMeaning=answer.split(/[,;]/)[0].toLowerCase().trim();return cleanCorrectAnswer.includes(userFirstMeaning)}}
        function updateProgress(){const progress=((currentQuestionIndex)/questions.length)*100;progressBar.style.width=`${progress}%`;progressText.textContent=`문제 ${currentQuestionIndex+1} / ${questions.length}`}
        function startTimer(){let timeLeft=600;timerDisplay.textContent="10:00";clearInterval(timerInterval);timerInterval=setInterval(()=>{timeLeft--;const minutes=Math.floor(timeLeft/60);const seconds=timeLeft%60;timerDisplay.textContent=`${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;if(timeLeft<=0){clearInterval(timerInterval);submitTest()}},1000)}
        function submitTest(){clearInterval(timerInterval);let totalScore=0;const incorrectAnswers=[];questions.forEach((q,index)=>{const userAnswer=userAnswers[index]||"";let score=0;if(q.type==='spelling'){score=userAnswer.toLowerCase()===q.word.toLowerCase()?100:0}else{score=calculateMeaningScore(userAnswer,q.meaning)}
        if(score<100){incorrectAnswers.push({question:q.originalQuestion,userAnswer:userAnswer||"미응답",correctAnswer:q.type==='spelling'?q.word:q.meaning,score:score})}
        totalScore+=score});const averageScore=questions.length>0?Math.round(totalScore/questions.length):0;displayResults(averageScore,incorrectAnswers)}
        function calculateMeaningScore(userAnswer,correctAnswer){const normalize=str=>str.toLowerCase().replace(/[()]/g,'').trim();const cleanCorrectAnswer=correctAnswer.replace(/\d+\.\s*/g,'').trim();const cleanUserAnswer=userAnswer.trim();if(cleanUserAnswer==="")return 0;const meaningGroups=cleanCorrectAnswer.split(';').map(g=>g.trim().split(',').map(s=>normalize(s)).filter(s=>s));const userMeanings=cleanUserAnswer.split(/[,;]/).map(m=>normalize(m)).filter(m=>m);const allPossibleCorrectMeanings=new Set(meaningGroups.flat());for(const userMeaning of userMeanings){let isMeaningValid=false;for(const correctMeaning of allPossibleCorrectMeanings){if(correctMeaning.includes(userMeaning)||userMeaning.includes(correctMeaning)){isMeaningValid=true;break}}
        if(!isMeaningValid){return 0}}
        let matchedGroupsCount=0;for(const group of meaningGroups){let isGroupMatched=false;for(const userMeaning of userMeanings){for(const similarMeaning of group){if(similarMeaning.includes(userMeaning)||userMeaning.includes(similarMeaning)){isGroupMatched=true;break}}
        if(isGroupMatched)break}
        if(isGroupMatched){matchedGroupsCount++}}
        if(meaningGroups.length===0)return 100;const matchedRatio=matchedGroupsCount/meaningGroups.length;if(matchedRatio>=1){return 100}else if(matchedRatio>=0.5){return 50}else{return 0}}
        function displayResults(score,incorrectList){finalScore.textContent=score;const scoreContainer=finalScore.parentElement;scoreContainer.className='text-5xl font-bold text-center py-8 mb-6 rounded-lg';if(score>=80){scoreContainer.classList.add('text-blue-600')}else if(score>=50){scoreContainer.classList.add('text-yellow-600')}else{scoreContainer.classList.add('text-red-600')}
        incorrectAnswersBody.innerHTML='';if(incorrectList.length===0){incorrectAnswersBody.innerHTML=`<tr><td colspan="4" class="text-center py-4 text-gray-500">틀린 문제가 없습니다! 완벽해요!</td></tr>`}else{incorrectList.forEach(item=>{const row=`<tr class="text-sm"><td class="px-4 py-3 align-top">${item.question}</td><td class="px-4 py-3 align-top text-red-600">${item.userAnswer}</td><td class="px-4 py-3 align-top text-blue-600">${item.correctAnswer}</td><td class="px-4 py-3 align-top font-semibold">${item.score}점</td></tr>`;incorrectAnswersBody.innerHTML+=row})}
        showScreen(resultsScreen)}
        function showToast(message){const toast=document.getElementById('toast');toast.textContent=message;toast.classList.remove('opacity-0','translate-y-5');setTimeout(()=>{toast.classList.add('opacity-0','translate-y-5')},2500)}
        init();
    </script>
</body>
</html>
